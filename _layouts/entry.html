<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% include head.html %}
    <title>{{ page.title }}</title>
    {% seo %}
</head>
<body>
    {% include navbar.html %}
    <header style="background: url({{ page.cover-picture }}) center/cover, var(--primary-600);">
        <div class="header_contents">
            <div class="article_title {{ page.category | downcase }}">
                <h6><svg class="icon"><use href="
                    {% if page.category == "Tutorial" %}
                    {{'assets/img/icons.svg#icon-tutorial' | absolute_url }}
                    {% elsif page.category == "Experiment" %}
                    {{'assets/img/icons.svg#icon-experiment' | absolute_url }}
                    {% elsif page.category == "Game" %}
                    {{'assets/img/icons.svg#icon-game' | absolute_url }}
                    {% else %}
                    {{'assets/img/icons.svg#icon-post' | absolute_url }}
                    {% endif %}
                    "></use></svg> {{ page.category }}</h6>
                <h1>{{ page.title }}</h1>
            </div>
            <div class="share_widget">
                <div class="share_dialog">
                    <div class="share_title">
                        <h5>Share this article</h5>
                        <button class="close_button"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-close' | absolute_url }}"></use></svg></button>
                    </div>
                    <div class="share_links">
                        <a href="#" data-tooltip="Share on Facebook"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-facebook' | absolute_url }}"></use></svg></a>
                        <a href="https://twitter.com/intent/tweet?text={{ page.title | uri_escape }}%20%7C%20Game%20Builder%20Playground&url={{ page.url | absolute_url | uri_escape }}" data-tooltip="Share on Twitter"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-twitter' | absolute_url }}"></use></svg></a>
                        <a href="https://reddit.com/submit?url={{ page.url | absolute_url | uri_escape }}&title={{ page.title | uri_escape }}%20%7C%20Game%20Builder%20Playground" data-tooltip="Share on Reddit"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-reddit' | absolute_url }}"></use></svg></a>
                        <a href="#" data-tooltip="Copy to clipboard"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-link' | absolute_url }}"></use></svg></a>
                    </div>
                </div>
                <button data-tooltip="Share this article" class="share_button"><svg class="icon"><use href="{{ 'assets/img/icons.svg#icon-share' | absolute_url }}"></use></svg></button>
            </div>
            
        </div>
    </header>
    <main>
        <section class="article_body">
            {{ content }}
        </section>
    </main>
    <script>
        const shareButton = document.querySelector('.share_button');
        const shareDialog = document.querySelector('.share_dialog');
        const closeButton = document.querySelector('.close_button');
        const title = document.title;
        const url = document.querySelector('link[rel=canonical]') ? document.querySelector('link[rel=canonical]').href : document.location.href;

        
        shareButton.addEventListener('click', event => {
            if (navigator.share) {
                navigator.share({
                title: title,
                url: url
                }).then(() => {
                console.log('Thanks for sharing!');
                })
                .catch(console.error);
            } else {
                shareDialog.classList.add('is_open');
            }
        });

        closeButton.addEventListener('click', event => {
        shareDialog.classList.remove('is_open');
        });

    </script>
</body>
</html>